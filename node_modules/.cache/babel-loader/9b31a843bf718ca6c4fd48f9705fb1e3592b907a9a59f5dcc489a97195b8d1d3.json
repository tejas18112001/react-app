{"ast":null,"code":"import Header from\"./Header\";import{Link,useNavigate}from'react-router-dom';import{useEffect,useState}from\"react\";import axios from\"axios\";import Categories from\"./categories\";import{FaHeart}from\"react-icons/fa\";import'./Home.css';import API_URL from\"../constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){const navigate=useNavigate();const[products,setproducts]=useState([]);const[cproducts,setcproducts]=useState([]);const[search,setsearch]=useState('');useEffect(()=>{const url=API_URL+'/get-products';axios.get(url).then(res=>{if(res.data.products){// console.log(res.data.products) ;\nsetproducts(res.data.products);}}).catch(err=>{// console.log(err);\nalert('server error');});},[]);const handlesearch=value=>{setsearch(value);};const handlesearchbtn=()=>{//   console.log(\"products\" ,products) ;\n// let searchProducts = products.filter((item) => {\n//     if (item.pname.toLowerCase().includes(search.toLowerCase()) ||\n//         item.pdesc.toLowerCase().includes(search.toLowerCase()) ||\n//         item.ptype.toLowerCase().includes(search.toLowerCase())) {\n//         return item;\n//     }\n// })\n// setcproducts(searchProducts);\nconst url=API_URL+\"/search?search=\"+search;axios.get(url).then(res=>{console.log(res.data.products);if(res.data.products)setcproducts(res.data.products);}).catch(err=>{console.log(err);alert('SERVER ERROR');});};const handleCategory=value=>{let searchProducts=products.filter(item=>{if(item.ptype.toLowerCase()==value.toLowerCase()){return item;}});setcproducts(searchProducts);};const handleLike=value=>{const userId=localStorage.getItem('userId');const productId=value;const data={userId,productId};const url=API_URL+\"/like-products\";axios.post(url,data).then(res=>{console.log(res);}).catch(err=>{alert(\"An error occurred. Please try again later.\");});};const handleproductDetail=value=>{navigate('/ProductDetail/'+value);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{search:search,handlesearch:handlesearch,handlesearchbtn:handlesearchbtn}),/*#__PURE__*/_jsx(Categories,{handleCategory:handleCategory}),cproducts&&cproducts.length>0?/*#__PURE__*/_jsx(\"h5\",{children:\"SEARCH PRODUCTS:\"}):/*#__PURE__*/_jsx(\"h5\",{children:\"NO PRODUCT FOUND\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center flex-wrap\",children:products&&products.length>0&&cproducts.map((item,index)=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"card m-3\",children:[/*#__PURE__*/_jsx(\"img\",{width:\"250px\",height:\"150px\",src:API_URL+'/'+item.pimage}),/*#__PURE__*/_jsxs(\"h3\",{className:\"m-2 price-text\",children:[\"Rs. \",item.pprice,\" /-\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"m-2\",children:[item.pname,\" | \",item.ptype]}),/*#__PURE__*/_jsx(\"p\",{className:\"m-2 text-primary\",children:item.pdesc})]},item._id);})}),/*#__PURE__*/_jsx(\"h5\",{children:\"ALL PRODUCTS:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center flex-wrap\",children:products&&products.length>0&&products.map((item,index)=>{return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleproductDetail(item._id),className:\"card m-3\",children:[/*#__PURE__*/_jsx(\"img\",{width:\"250px\",height:\"150px\",src:API_URL+'/'+item.pimage}),/*#__PURE__*/_jsx(\"div\",{className:\"icon-con\",onClick:()=>handleLike(item._id),children:/*#__PURE__*/_jsx(FaHeart,{className:\"icons\"})}),/*#__PURE__*/_jsxs(\"h3\",{className:\"m-2 price-text\",children:[\"Rs. \",item.pprice,\" /-\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"m-2\",children:[item.pname,\" | \",item.ptype]}),/*#__PURE__*/_jsx(\"p\",{className:\"m-2 text-primary\",children:item.pdesc})]},item._id);})})]});}export default Home;","map":{"version":3,"names":["Header","Link","useNavigate","useEffect","useState","axios","Categories","FaHeart","API_URL","jsx","_jsx","jsxs","_jsxs","Home","navigate","products","setproducts","cproducts","setcproducts","search","setsearch","url","get","then","res","data","catch","err","alert","handlesearch","value","handlesearchbtn","console","log","handleCategory","searchProducts","filter","item","ptype","toLowerCase","handleLike","userId","localStorage","getItem","productId","post","handleproductDetail","children","length","className","map","index","width","height","src","pimage","pprice","pname","pdesc","_id","onClick"],"sources":["D:/clones/BigBazar/react-app/src/components/Home.jsx"],"sourcesContent":["import Header from \"./Header\";\r\nimport { Link, useNavigate } from 'react-router-dom'\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport Categories from \"./categories\";\r\nimport { FaHeart } from \"react-icons/fa\";\r\nimport './Home.css' ;\r\nimport API_URL from \"../constants\";\r\n\r\nfunction Home() {\r\n    const navigate = useNavigate();\r\n    const [products, setproducts] = useState([]);\r\n    const [cproducts, setcproducts] = useState([]);\r\n    const [search, setsearch] = useState('');\r\n    \r\n   \r\n\r\n\r\n\r\n    useEffect(() => {\r\n        const url = API_URL+'/get-products';\r\n        axios.get(url)\r\n            .then((res) => {\r\n                \r\n                if (res.data.products) {\r\n                    // console.log(res.data.products) ;\r\n                    setproducts(res.data.products);\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                // console.log(err);\r\n                alert('server error');\r\n            })\r\n    }, []) ;\r\n\r\n\r\n\r\n    const handlesearch = (value) => {\r\n\r\n        setsearch(value);\r\n    }\r\n\r\n    const handlesearchbtn = () => {\r\n        //   console.log(\"products\" ,products) ;\r\n        // let searchProducts = products.filter((item) => {\r\n            \r\n            //     if (item.pname.toLowerCase().includes(search.toLowerCase()) ||\r\n        //         item.pdesc.toLowerCase().includes(search.toLowerCase()) ||\r\n        //         item.ptype.toLowerCase().includes(search.toLowerCase())) {\r\n            //         return item;\r\n            //     }\r\n            // })\r\n            \r\n            // setcproducts(searchProducts);\r\n            \r\n        const url = API_URL+\"/search?search=\"+search ;\r\n        axios.get(url)\r\n        .then((res) => {\r\n            console.log(res.data.products) ;\r\n            if(res.data.products)\r\n             setcproducts(res.data.products);\r\n        })\r\n        .catch((err) => {\r\n            console.log(err) ;\r\n            alert('SERVER ERROR');\r\n        })\r\n\r\n    }\r\n\r\n\r\n    const handleCategory = (value) => {\r\n        \r\n        let searchProducts = products.filter((item) => {\r\n            \r\n            if (item.ptype.toLowerCase() == (value.toLowerCase())) {\r\n                return item;\r\n            }\r\n        })\r\n\r\n        setcproducts(searchProducts);\r\n    }\r\n\r\n   \r\n    const handleLike = (value) => {\r\n\r\n      \r\n        const userId  = localStorage.getItem('userId');\r\n        const productId = value ;\r\n        \r\n        const data = { userId, productId };\r\n        const url = API_URL+\"/like-products\";\r\n        axios.post(url, data)\r\n            .then((res) => {\r\n                 console.log(res) ;\r\n                 \r\n            })\r\n            .catch((err) => {\r\n               alert(\"An error occurred. Please try again later.\");\r\n    });\r\n        \r\n\r\n        \r\n             \r\n    }\r\n\r\n\r\n    const handleproductDetail = (value)=>{\r\n         navigate('/ProductDetail/'+value)\r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            <Header search={search} handlesearch={handlesearch} handlesearchbtn={handlesearchbtn} />\r\n            <Categories handleCategory={handleCategory} />\r\n             \r\n            {\r\n                cproducts && cproducts.length > 0 ?\r\n                <h5>SEARCH PRODUCTS:</h5> :\r\n\r\n                <h5>NO PRODUCT FOUND</h5>\r\n\r\n            }\r\n            <div className=\"d-flex justify-content-center flex-wrap\">\r\n                {\r\n                    products && products.length > 0 &&\r\n                    cproducts.map((item, index) => {\r\n                        return (\r\n                            <div key={item._id} className=\"card m-3\">\r\n                                <img width=\"250px\" height=\"150px\" src={API_URL+'/' + item.pimage}></img>\r\n                                <h3 className=\"m-2 price-text\">Rs. {item.pprice} /-</h3>\r\n                                <p className=\"m-2\">{item.pname} | {item.ptype}</p>\r\n                                <p className=\"m-2 text-primary\">{item.pdesc}</p>\r\n                            </div>\r\n\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n\r\n            <h5>ALL PRODUCTS:</h5>\r\n            <div className=\"d-flex justify-content-center flex-wrap\">\r\n                {\r\n                    products && products.length > 0 &&\r\n                    products.map((item, index) => {\r\n                        return (\r\n                            <div  onClick={()=>handleproductDetail(item._id)} key={item._id} className=\"card m-3\">\r\n                                <img width=\"250px\" height=\"150px\" src={API_URL+'/' + item.pimage}></img>\r\n                                <div className=\"icon-con\" onClick={()=>handleLike(item._id)}>\r\n                                    <FaHeart className=\"icons\" />\r\n                                </div>\r\n                                <h3 className=\"m-2 price-text\">Rs. {item.pprice} /-</h3>\r\n                                <p className=\"m-2\">{item.pname} | {item.ptype}</p>\r\n                                <p className=\"m-2 text-primary\">{item.pdesc}</p>\r\n                            </div>\r\n\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n             \r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}